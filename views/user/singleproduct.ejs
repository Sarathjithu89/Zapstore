<%- include('../partials/header.ejs') %>
<head>
  
  <link rel="shortcut icon" type="image/x-icon" href="images/favicon.png" />
  <!-- Material Design Iconic Font-V2.2.0 -->
  <link rel="stylesheet" href="/css/material-design-iconic-font.min.css" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/css/font-awesome.min.css" />
  <!-- Font Awesome Stars-->
  <link rel="stylesheet" href="/css/fontawesome-stars.css" />
  <!-- Meanmenu CSS -->
  <link rel="stylesheet" href="/css/meanmenu.css" />
  <!-- owl carousel CSS -->
  <link rel="stylesheet" href="/css/owl.carousel.min.css" />
  <!-- Slick Carousel CSS -->
  <link rel="stylesheet" href="/css/slick.css" />
  <!-- Animate CSS -->
  <link rel="stylesheet" href="/css/animate.css" />
  <!-- Jquery-ui CSS -->
  <link rel="stylesheet" href="/css/jquery-ui.min.css" />
  <!-- Venobox CSS -->
  <link rel="stylesheet" href="/css/venobox.css" />
  <!-- Nice Select CSS -->
  <link rel="stylesheet" href="/css/nice-select.css" />
  <!-- Magnific Popup CSS -->
  <link rel="stylesheet" href="/css/magnific-popup.css" />
  <!-- Bootstrap V4.1.3 Fremwork CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css" />
  <!-- Helper CSS -->
  <link rel="stylesheet" href="/css/helper.css" />
  <!-- Main Style CSS -->
  <link rel="stylesheet" href="style.css" />
  <!-- Responsive CSS -->
  <link rel="stylesheet" href="/css/responsive.css" />
</head>
<style>
  /* Enhanced Product Styling */
  /* Main Layout */
  .single-product-area {
    padding: 30px 0;
    background-color: #fff;
    border-radius: 12px;
  }

  /* Breadcrumb */
  .product-breadcrumb {
    margin-bottom: 30px;
    padding: 10px 0;
    
  }
  
  .product-breadcrumb ol {
    display: flex;
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 14px;
  }
  
  .product-breadcrumb li + li:before {
    content: "/";
    padding: 0 8px;
    color: #777;
  }

  /* Main Product Image */
  .product-details-left {
    position: relative;
    margin-bottom: 30px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
  }

  .product-details-images {
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    transition: all 0.3s ease;
    margin-bottom: 20px;
    background-color: #fff;
    
  }

  .lg-image {
    overflow: hidden;
    position: relative;
    height: 460px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f9f9f9;
  }

  .lg-image img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

.product-details-thumbs{
    padding: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
  }
 .slick-slider .slick-slide {
    margin: 0 5px;
  }

  .product-details-thumbs::-webkit-scrollbar {
    height: 6px;
  }

  .product-details-thumbs::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }

  .product-details-thumbs::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 10px;
  }

  .sm-image {
    flex: 0 0 80px;
    height: 80px;
    border-radius: 8px;
    overflow: hidden;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
  
}

  /* Image Zoom Lens */
  .zoom-lens {
    position: absolute;
    border: 1px solid #d4d4d4;
    width: 100px;
    height: 100px;
    background-repeat: no-repeat;
    display: none;
    cursor: crosshair;
    z-index: 10;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  }

  /* Image Overlay for Zoom Hint */
  .zoom-hint {
    position: absolute;
    right: 15px;
    bottom: 15px;
    color: #fff;
    background: rgba(0, 0, 0, 0.5);
    padding: 6px 10px;
    border-radius: 20px;
    font-size: 12px;
    opacity: 0.7;
    transition: opacity 0.3s;
  }

  .lg-image:hover .zoom-hint {
    opacity: 1;
  }

  /* Image Badges */
  .product-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    z-index: 10;
    display: flex;
    flex-direction: column;
    gap: 5px;
  }

  .badge-new, .badge-sale, .badge-featured {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .badge-new {
    background-color: #00c853;
    color: white;
  }

  .badge-sale {
    background-color: #ff3d00;
    color: white;
  }

  .badge-featured {
    background-color: #2962ff;
    color: white;
  }

  /* Thumbnails Styling */
  .product-details-thumbs {
    display: flex;
    gap: 10px;
    margin-top: 15px;
    overflow-x: auto;
    padding: 5px 0;
    scroll-behavior: smooth;
    scrollbar-width: thin;
  }

  .product-details-thumbs::-webkit-scrollbar {
    height: 6px;
  }

  .product-details-thumbs::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }

  .product-details-thumbs::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 10px;
  }

  .sm-image {
    flex: 0 0 80px;
    height: 80px;
    border-radius: 8px;
    overflow: hidden;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
  }

  .sm-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .sm-image:hover, .sm-image.active {
    border-color: #ff6a00;
    transform: translateY(-3px);
  }

  .sm-image:hover img {
    transform: scale(1.1);
  }

  /* Product Info Styling */
  .product-details-view-content {
    padding: 0 20px;
  }

  .product-info h2 {
    font-size: 28px;
    font-weight: 600;
    margin-bottom: 15px;
    color: #333;
  }

  .product-details-ref {
    display: inline-block;
    font-size: 14px;
    color: #777;
    margin-bottom: 15px;
  }

  /* Rating Stars */
  .rating-box {
    margin-bottom: 20px;
  }

  .rating {
    display: flex;
    gap: 5px;
    align-items: center;
  }

  .rating li {
    color: #ffb400;
  }

  .rating .no-star {
    color: #ddd;
  }

  .rating-with-review-item {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
  }

  .review-item a {
    color: #555;
    text-decoration: none;
    font-size: 14px;
    transition: color 0.3s;
  }

  .review-item a:hover {
    color: #ff6a00;
  }

  /* Price Styling */
  .price-box {
    margin-bottom: 25px;
    display: flex;
    align-items: baseline;
    gap: 10px;
  }

  .new-price {
    font-size: 24px;
    font-weight: 700;
    color: #ff6a00;
  }

  .old-price {
    font-size: 18px;
    font-weight: 400;
    color: #999;
    text-decoration: line-through;
  }

  .discount-percentage {
    background-color: #ff6a00;
    color: white;
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 600;
  }

  /* Product Short Description */
  .product-desc {
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 1px solid #eee;
  }

  .product-desc p {
    line-height: 1.6;
    color: #555;
  }

  /* Quantity Selector */
  .single-add-to-cart {
    margin-bottom: 25px;
  }

  .cart-quantity {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    align-items: flex-end;
  }

  .quantity {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .quantity label {
    font-weight: 600;
    color: #555;
  }

  .cart-plus-minus {
   
    border: 1px solid #ddd;
    border-radius: 4px;
  
    align-items: center;
    justify-content: center;
  }

  .cart-plus-minus-box {
    border: none;
    text-align: center;
    font-size: 16px;
    background: transparent;
  }

  .qtybutton {
    
  
   
    cursor: pointer;
    background: #f5f5f5;
    transition: all 0.3s ease;
  }

  .dec.qtybutton {
    right: 0;
    border-right: 1px solid #ddd;
  }

  .inc.qtybutton {
    right: 0;
    border-left: 1px solid #ddd;
  }

  .qtybutton:hover {
    background: #eee;
  }

  /* Add to Cart Button */
  .add-to-cart {
    padding: 12px 32px;
    background: #ff6a00;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .add-to-cart:hover {
    background: #e55f00;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(229, 95, 0, 0.25);
  }

  .add-to-cart:active {
    transform: translateY(0);
    box-shadow: none;
  }

  /* Social Sharing */
  .product-social-sharing {
    margin-top: 25px;
    padding-top: 20px;
    border-top: 1px solid #eee;
  }

  .product-social-sharing ul {
    display: flex;
    gap: 10px;
    list-style: none;
    padding: 0;
  }

  .product-social-sharing li a {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 8px 15px;
    border-radius: 4px;
    color: white;
    font-size: 14px;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .facebook a {
    background-color: #3b5998;
  }

  .twitter a {
    background-color: #1da1f2;
  }

  .google-plus a {
    background-color: #dd4b39;
  }

  .instagram a {
    background-color: #c32aa3;
  }

  .product-social-sharing a:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }

  /* Product Description Tabs */
  .li-product-tab {
    border-bottom: 1px solid #eee;
    margin-bottom: 30px;
  }

  .li-product-menu {
    display: flex;
    list-style: none;
    padding: 0;
    gap: 30px;
    margin: 0;
  }

  .li-product-menu li a {
    display: block;
    padding: 15px 5px;
    color: #777;
    font-size: 16px;
    font-weight: 600;
    text-decoration: none;
    position: relative;
    transition: all 0.3s ease;
  }

  .li-product-menu li a.active,
  .li-product-menu li a:hover {
    color: #ff6a00;
  }

  .li-product-menu li a.active::after {
    content: "";
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: #ff6a00;
  }

  /* Tab Content */
  .tab-content {
    padding: 30px 0;
  }

  .tab-pane {
    display: none;
  }

  .tab-pane.active {
    display: block;
    animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .product-description {
    line-height: 1.8;
    color: #555;
  }

  /* Product Details */
  .product-details-manufacturer {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .product-details-manufacturer img {
    max-width: 150px;
    margin-bottom: 20px;
  }

  .product-details-manufacturer p {
    display: flex;
    gap: 10px;
    align-items: baseline;
  }

  .product-details-manufacturer span {
    font-weight: 600;
    min-width: 100px;
    color: #555;
  }

  /* Reviews Section */
  .comment-review {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 10px;
  }

  .comment-author-infos {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
  }

  .comment-details {
    background: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
  }

  .comment-details h4 {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .comment-details p {
    line-height: 1.6;
    color: #555;
  }

  .review-btn {
    margin: 20px 0;
  }

  .review-links {
    display: inline-block;
    padding: 10px 20px;
    background: #f5f5f5;
    color: #555;
    text-decoration: none;
    border-radius: 4px;
    transition: all 0.3s ease;
  }

  .review-links:hover {
    background: #eee;
    color: #ff6a00;
  }

  /* Related Products */
  .li-trending-product-tab {
    margin-bottom: 30px;
  }

  .li-trending-product-tab h2 {
    font-size: 22px;
    font-weight: 600;
    position: relative;
    padding-bottom: 10px;
    margin-bottom: 20px;
  }

  .li-trending-product-tab h2::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 60px;
    height: 3px;
    background-color: #ff6a00;
  }

  /* Single Product Card */
  .single-product-wrap {
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    margin-bottom: 20px;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .single-product-wrap:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }

  .product-image {
    position: relative;
    overflow: hidden;
  }

  .product-image a {
    display: block;
    overflow: hidden;
  }

  .product-image img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .product-image:hover img {
    transform: scale(1.1);
  }

  .sticker {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 5px 10px;
    background-color: #00c853;
    color: white;
    font-size: 12px;
    border-radius: 4px;
    font-weight: 600;
    z-index: 2;
  }

  .product_desc {
    padding: 15px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }

  .product_desc_info {
    flex-grow: 1;
  }

  .product_name {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 10px;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .product_name:hover {
    color: #ff6a00;
  }

  /* Add to Cart Actions */
  .add-actions {
    margin-top: 10px;
  }

  .add-actions-link {
    display: flex;
    justify-content: space-evenly;
    list-style: none;
    padding: 10px 0;
    margin: 0;
  }

  .add-cart {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
  }

  .add-cart a {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    background: #ff6a00;
    color: white;
    border-radius: 4px;
    font-size: 14px;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .add-cart a:hover {
    background: #e55f00;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(229, 95, 0, 0.25);
  }

  .links-details {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    padding: 10px;
    background: #f5f5f5;
    color: #555;
    border-radius: 4px;
    text-decoration: none;
    font-size: 14px;
    transition: all 0.3s ease;
  }

  .links-details:hover {
    background: #f9f9f9;
    color: #ff6a00;
    border-color: #ff6a00;
  }

  /* zoom */
  

  /* Animation effects */
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Apply animations */
  .single-product-area {
    animation: fadeUp 0.6s ease-out;
  }

  /* Responsive adjustments */
  @media (max-width: 992px) {
    .product-details-view-content {
      padding: 0;
      margin-top: 30px;
    }

    .lg-image {
      height: 350px;
    }
  }

  @media (max-width: 768px) {
    .product-social-sharing ul {
      flex-wrap: wrap;
    }

    .sm-image {
      flex: 0 0 60px;
      height: 60px;
    }

    .lg-image {
      height: 300px;
    }
  }

  @media (max-width: 576px) {
    .cart-quantity {
      flex-direction: column;
      align-items: flex-start;
    }

    .add-to-cart {
      width: 100%;
      justify-content: center;
    }

    .product-info h2 {
      font-size: 24px;
    }

    .li-product-menu {
      gap: 15px;
    }

    .li-product-menu li a {
      padding: 10px 5px;
      font-size: 14px;
    }
  }
  
  #imageZoom {
        width: 550px;
        height: 700px;
        position: relative;
      }
      #imageZoom img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: 0 0;
      }
      #imageZoom::after {
        display: var(--display);
        content: "";
        width: 100%;
        height: 100%;
        background-color: black;
        background-image: var(--url);
        background-size: 200%;
        background-position: var(--zoom-x) var(--zoom-y);
        position: absolute;
        left: 0;
        top: 0;
      }
</style>
<!-- Sticky Header Area Start -->
<div class="header-bottom header-sticky d-none d-lg-block d-xl-block">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <!-- Begin Header Bottom Menu Area -->
        <div class="hb-menu">
          <nav>
            <ul>
              <li class="dropdown-holder">
                <a href="/">Home</a>
              </li>
              <li class="megamenu-holder">
                <a href="/shop">Shop</a>
              </li>
              <li><a href="/about">About Us</a></li>
              <li><a href="/contact">Contact</a></li>
            </ul>
          </nav>
        </div>
        <!-- Header Bottom Menu Area End Here -->
      </div>
    </div>
  </div>
</div>
<!-- Sticky Header Area End -->

<!-- Product Details Area Start -->
<div class="content-wraper">
  <div class="container">
    <!-- Breadcrumb -->
    <div class="product-breadcrumb">
      <ol>
        <li><a href="/">Home</a></li>
        <li><a href="/shop">Shop</a></li>
        <% if (product.category) { %>
          <li><a href="/category/<%= product.category._id %>"><%= product.category.name %></a></li>
        <% } %>
        <li><%= product.productName %></li>
      </ol>
    </div>

    <div class="row single-product-area">
      <div class="col-lg-5 col-md-6">
        <!-- Product Details Left -->
        <div class="product-details-left">
          <!-- Product Badges -->
          <div class="product-badge">
            <% if (product.isNew) { %>
              <span class="badge-new">New</span>
            <% } %>
            <% if (product.regularPrice > product.salePrice) { %>
              <span class="badge-sale">Sale</span>
            <% } %>
          </div>

          <div class="product-details-images slider-navigation-1">
            <% if (product.productImage && product.productImage.length >= 0) { %>
              <% product.productImage.forEach((image, index) => { %>
                <div class="lg-image "id="zooms"style="--url: url(1.jpg); --zoom-x: 0%; --zoom-y: 0%; --display: none" >
                  <img
                  
                    src="/uploads/product-images/<%= image %>"
                    alt="<%= product.productName %>"
                    class="<%= index === 0 ? 'active' : '' %>"
                  />
                  <!-- <div class="zoom-hint"><i class="fa fa-search-plus"></i> Hover to zoom</div>
                  <div class="zoom-lens"></div> -->
                </div>
              <% }); %>
            <% } else { %>
              <div class="lg-image " >
                <img
                  src="/images/product/large-size/default.jpg"
                  alt="<%= product.productName %>"
                  class="active"
                />
              </div>
            <% } %>
          </div>

          <div class="product-details-thumbs slider-thumbs-1">
            <% if (product.productImage && product.productImage.length >= 0) { %>
              <% product.productImage.forEach((image, index) => { %>
                <div class="sm-image <%= index === 0 ? 'active' : '' %>" data-index="<%= index %>">
                  <img
                    src="/uploads/product-images/<%= image %>"
                    alt="product image thumb"
                    data-large="/uploads/product-images/<%= image %>"
                  />
                </div>
              <% }); %>
            <% } else { %>
              <div class="sm-image active" data-index="0">
                <img
                  src="/images/product/small-size/default.jpg"
                  alt="product image thumb"
                  data-large="/images/product/large-size/default.jpg"
                />
              </div>
            <% } %>
          </div>
        </div>
        <!--// Product Details Left -->
      </div>

      <div class="col-lg-7 col-md-6">
        <div class="product-details-view-content sp-normal-content pt-60">
          <div class="product-info">
            <h2><%= product.productName %></h2>
            <span class="product-details-ref">
              Reference: <%= product.productSKU || 'N/A' %>
            </span>
            
            <div class="rating-box pt-20">
              <ul class="rating rating-with-review-item">
                <% for (let i = 0; i < 5; i++) { %>
                  <% if (i < Math.round(product.rating || 0)) { %>
                    <li><i class="fa fa-star"></i></li>
                  <% } else { %>
                    <li class="no-star"><i class="fa fa-star-o"></i></li>
                  <% } %>
                <% } %>
                <li class="review-item">
                  <a href="#reviews">
                    <%= product.reviews ? product.reviews.length : 0 %> Reviews
                  </a>
                </li>
                <li class="review-item">
                  <a href="#" data-toggle="modal" data-target="#mymodal">
                    <i class="fa fa-pencil"></i> Write Review
                  </a>
                </li>
              </ul>
            </div>
            
            <div class="price-box pt-20">
              <span class="new-price new-price-2">
                ₹<%= product.salePrice.toFixed(2) %>
              </span>
              <% if (product.regularPrice > product.salePrice) { %>
                <span class="old-price">
                  ₹<%= product.regularPrice.toFixed(2) %>
                </span>
                <span class="discount-percentage">
                  -<%= ((product.regularPrice - product.salePrice) / product.regularPrice * 100).toFixed(0) %>%
                </span>
              <% } %>
            </div>
            
            <div class="product-desc">
              <p>
                <span><%= product.shortDescription %></span>
              </p>
            </div>
            
            <div class="single-add-to-cart">
              <form
                action="/cart/add/<%= product._id %>"
                method="POST"
                class="cart-quantity"
              >
                <div class="quantity">
                  <label>Quantity</label>
                  <div class="cart-plus-minus">
                    <input
                      class="cart-plus-minus-box"
                      value="1"
                      type="text"
                      name="quantity"
                    />
                    <div class="dec qtybutton">
                      <i class="fa fa-angle-down"></i>
                    </div>
                    <div class="inc qtybutton">
                      <i class="fa fa-angle-up"></i>
                    </div>
                  </div>
                </div>
                <button class="add-to-cart" type="submit">
                  <i class="fa fa-shopping-cart"></i> Add to cart
                </button>
              </form>
            </div>
            
            <div class="product-additional-info">
              <div class="product-social-sharing">
                <ul>
                  <li class="facebook">
                    <a href="#"><i class="fa fa-facebook"></i>Facebook</a>
                  </li>
                  <li class="twitter">
                    <a href="#"><i class="fa fa-twitter"></i>Twitter</a>
                  </li>
                  <li class="google-plus">
                    <a href="#"><i class="fa fa-google-plus"></i>Google +</a>
                  </li>
                  <li class="instagram">
                    <a href="#"><i class="fa fa-instagram"></i>Instagram</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Product Details Area End -->

<!-- Product Description Tab Area Start -->
<div class="product-area pt-40">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="li-product-tab">
          <ul class="nav li-product-menu">
            <li>
              <a class="active" data-toggle="tab" href="#description">
                <span>Description</span>
              </a>
            </li>
            <li>
              <a data-toggle="tab" href="#product-details">
                <span>Product Details</span>
              </a>
            </li>
            <li>
              <a data-toggle="tab" href="#reviews">
                <span>Reviews (<%= product.reviews ? product.reviews.length : 0 %>)</span>
              </a>
            </li>
          </ul>
        </div>
    </div>
    <!-- Begin Li's Tab Content Area -->
    <div class="tab-content">
      <div id="description" class="tab-pane active show" role="tabpanel">
        <div class="product-description">
          <p><%= product.description %></p>
        </div>
      </div>
      <div id="product-details" class="tab-pane" role="tabpanel">
        <div class="product-details-manufacturer">
          <% if (product.manufacturer && product.manufacturer.logo) { %>
            <img src="<%= product.manufacturer.logo %>" alt="<%= product.manufacturer.name %>" />
          <% } %>
          <p><span>Availability:</span> <%= product.status %></p>
          <!-- <p><span>SKU:</span> <%= product.productSKU || 'N/A' %></p> -->
          <% if (product.weightKg) { %>
            <p><span>Weight:</span> <%= product.weightKg %> kg</p>
          <% } %>
          <% if (product.dimensions) { %>
            <p><span>Dimensions:</span> <%= product.dimensions %></p>
          <% } %>
          <% if (product.material) { %>
            <p><span>Material:</span> <%= product.material %></p>
          <% } %>
          <% if (product.color) { %>
            <p><span>Color:</span> <%= product.color %></p>
          <% } %>
          <% if (product.brand) { %>
            <p><span>Brand:</span> <%= product.brand %></p>
          <% } %>
        </div>
      </div>
      <div id="reviews" class="tab-pane" role="tabpanel">
        <div class="product-reviews">
          <div class="product-details-comment-block">
            <% if (product.reviews && product.reviews.length > 0) { %>
              <% product.reviews.forEach(review => { %>
                <div class="comment-details">
                  <div class="comment-author-infos">
                    <h4><%= review.name || 'Anonymous' %></h4>
                    <div class="comment-review">
                      <ul class="rating">
                        <% for (let i = 0; i < 5; i++) { %>
                          <% if (i < review.rating) { %>
                            <li><i class="fa fa-star"></i></li>
                          <% } else { %>
                            <li class="no-star"><i class="fa fa-star-o"></i></li>
                          <% } %>
                        <% } %>
                      </ul>
                      <span><%= new Date(review.date).toLocaleDateString() %></span>
                    </div>
                  </div>
                  <p><%= review.comment %></p>
                </div>
              <% }) %>
            <% } else { %>
              <p>No reviews yet. Be the first to review this product.</p>
            <% } %>
            <div class="review-btn">
              <a class="review-links" href="#" data-toggle="modal" data-target="#mymodal">
                Write Your Review!
              </a>
            </div>
            <!-- Begin Review Modal Area -->
            <div class="modal fade modal-wrapper" id="mymodal">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-body">
                    <h3 class="review-page-title">Write Your Review</h3>
                    <div class="modal-inner-area row">
                      <div class="col-lg-12">
                        <div class="li-review-content">
                          <!-- Begin Feedback Area -->
                          <div class="feedback-area">
                            <div class="feedback">
                              <form action="/product/<%= product._id %>/review" method="POST">
                                <p class="feedback-form">
                                  <label for="name">Your Name</label>
                                  <input type="text" name="name" id="name" required />
                                </p>
                                <p class="feedback-form">
                                  <label for="email">Your Email</label>
                                  <input type="email" name="email" id="email" required />
                                </p>
                                <p class="feedback-form">
                                  <label for="rating">Your Rating</label>
                                  <select name="rating" id="rating" required>
                                    <option value="5">5 Stars</option>
                                    <option value="4">4 Stars</option>
                                    <option value="3">3 Stars</option>
                                    <option value="2">2 Stars</option>
                                    <option value="1">1 Star</option>
                                  </select>
                                </p>
                                <p class="feedback-form">
                                  <label for="comment">Your Review</label>
                                  <textarea name="comment" id="comment" cols="45" rows="8" required></textarea>
                                </p>
                                <div class="feedback-input">
                                  <button class="feedback-btn" type="submit">Submit</button>
                                </div>
                              </form>
                            </div>
                          </div>
                          <!-- Feedback Area End Here -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Review Modal Area End Here -->
          </div>
        </div>
      </div>
    </div>
    <!-- End Li's Tab Content Area -->
  </div>
</div>
</div>
</div>
<!-- Product Description Tab Area End -->

<!-- Begin Related Products Area -->
<div class="li-trending-product pt-60 pb-45">
<div class="container">
<div class="row">
  <div class="col-lg-12">
    <div class="li-trending-product-tab">
      <h2>Related Products</h2>
      <div class="row">
        <% if (relatedProducts && relatedProducts.length > 0) { %>
          <% relatedProducts.forEach(relProduct => { %>
            <div class="col-lg-3 col-md-4 col-sm-6">
              <div class="single-product-wrap">
                <div class="product-image">
                  <a href="/product/<%= relProduct._id %>">
                    <img 
                      src="<%= relProduct.productImage && relProduct.productImage.length ? '/uploads/product-images/' + relProduct.productImage[0] : '/images/product/large-size/default.jpg' %>" 
                      alt="<%= relProduct.productName %>"
                    >
                  </a>
                  <% if (relProduct.isNew) { %>
                    <span class="sticker">New</span>
                  <% } %>
                </div>
                <div class="product_desc">
                  <div class="product_desc_info">
                    <h4>
                      <a class="product_name" href="/product/<%= relProduct._id %>">
                        <%= relProduct.productName %>
                      </a>
                    </h4>
                    <div class="price-box">
                      <span class="new-price">₹<%= relProduct.salePrice.toFixed(2) %></span>
                      <% if (relProduct.regularPrice > relProduct.salePrice) { %>
                        <span class="old-price">₹<%= relProduct.regularPrice.toFixed(2) %></span>
                      <% } %>
                    </div>
                  </div>
                  <div class="add-actions">
                    <ul class="add-actions-link">
                      <li class="add-cart">
                        <a href="/cart/add/<%= relProduct._id %>?quantity=1">Add to cart</a>
                      </li>
                      <li>
                        <a href="/product/<%= relProduct._id %>" class="links-details">
                          <i class="fa fa-eye"></i>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          <% }); %>
        <% } else { %>
          <div class="col-12">
            <p>No related products found.</p>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</div>
</div>
</div>
<!-- Related Products Area End -->

<!-- JavaScript Files -->
<script>
  $(document).ready(function() {
  // Product image gallery
  $('.sm-image').on('click', function() {
    const index = $(this).data('index');
    $('.sm-image').removeClass('active');
    $(this).addClass('active');
    $('.lg-image').removeClass('active').eq(index).addClass('active');
  });
  
  // Quantity buttons
  $('.qtybutton').on('click', function() {
    const $button = $(this);
    const oldValue = $button.parent().find('input').val();
    let newVal;
    
    if ($button.hasClass('inc')) {
      newVal = parseFloat(oldValue) + 1;
    } else {
      // Don't allow decrementing below 1
      if (oldValue > 1) {
        newVal = parseFloat(oldValue) - 1;
      } else {
        newVal = 1;
      }
    }
    $button.parent().find('input').val(newVal);
  });
  
  // Tab navigation
  $('.li-product-menu a').on('click', function(e) {
    e.preventDefault();
    const target = $(this).attr('href');
    $('.li-product-menu a').removeClass('active');
    $(this).addClass('active');
    $('.tab-pane').removeClass('active show');
    $(target).addClass('active show');
  });

  //zoom
  
      let imageZoom = document.getElementById("zooms");
      imageZoom.addEventListener("mousemove", (event) => {
        imageZoom.style.setProperty("--display", "block");
        let pointer = {
          x: (event.offsetX * 100) / imageZoom.offsetWidth,
          y: (event.offsetY * 100) / imageZoom.offsetHeight,
        };
        imageZoom.style.setProperty("--zoom-x", pointer.x + "%");
        imageZoom.style.setProperty("--zoom-y", pointer.y + "%");
      });
      imageZoom.addEventListener("mouseout", () => {
        imageZoom.style.setProperty("--display", "none");
      });
   
  });
  </script>
<!-- jQuery-V1.12.4 -->
<script src="/js/vendor/jquery-1.12.4.min.js"></script>
<!-- Popper js -->
<script src="/js/vendor/popper.min.js"></script>
<!-- Bootstrap V4.1.3 Fremwork js -->
<script src="/js/bootstrap.min.js"></script>
<!-- Ajax Mail js -->
<script src="/js/ajax-mail.js"></script>
<!-- Meanmenu js -->
<script src="/js/jquery.meanmenu.min.js"></script>
<!-- Wow.min js -->
<script src="/js/wow.min.js"></script>
<!-- Slick Carousel js -->
<script src="/js/slick.min.js"></script>
<!-- Owl Carousel-2 js -->
<script src="/js/owl.carousel.min.js"></script>
<!-- Magnific popup js -->
<script src="/js/jquery.magnific-popup.min.js"></script>
<!-- Isotope js -->
<script src="/js/isotope.pkgd.min.js"></script>
<!-- Imagesloaded js -->
<script src="/js/imagesloaded.pkgd.min.js"></script>
<!-- Mixitup js -->
<script src="/js/jquery.mixitup.min.js"></script>
<!-- Countdown -->
<script src="/js/jquery.countdown.min.js"></script>
<!-- Counterup -->
<script src="/js/jquery.counterup.min.js"></script>
<!-- Waypoints -->
<script src="/js/waypoints.min.js"></script>
<!-- Barrating -->
<script src="/js/jquery.barrating.min.js"></script>
<!-- Jquery-ui -->
<script src="/js/jquery-ui.min.js"></script>
<!-- Venobox -->
<script src="/js/venobox.min.js"></script>
<!-- Nice Select js -->
<script src="/js/jquery.nice-select.min.js"></script>
<!-- ScrollUp js -->
<script src="/js/scrollUp.min.js"></script>
<!-- Main/Activator js -->
<script src="/js/main.js"></script>



<%- include('../partials/footer.ejs') %>