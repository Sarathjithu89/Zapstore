<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= product.name %></title>
  </head>
  <style>
    /* Basic Reset */
    body,
    h1,
    h2,
    h3,
    p,
    ul,
    li {
      margin: 0;
      padding: 0;
      border: 0;
      font-size: 100%;
      font: inherit;
      vertical-align: baseline;
    }

    body {
      font-family: "Arial", sans-serif;
      line-height: 1.6;
      background-color: #f4f4f4;
      color: #333;
    }

    .container {
      width: 80%;
      margin: auto;
      overflow: hidden;
      padding: 20px;
    }

    /* Breadcrumb */
    .breadcrumb {
      padding: 10px 0;
      font-size: 0.8em;
    }

    .breadcrumb a,
    .breadcrumb span {
      margin-right: 5px;
      text-decoration: none;
      color: #007bff;
    }

    /* Product Details */
    .product-details {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
    }

    .product-images {
      width: 50%;
    }

    .main-image {
      position: relative;
      overflow: hidden;
    }

    .main-image img {
      width: 100%;
      display: block;
      transition: transform 0.3s ease;
    }

    .main-image:hover img {
      transform: scale(1.1);
    }

    .badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: #dc3545;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.8em;
    }

    .badge.new {
      background-color: #28a745;
    }

    .thumbnails {
      display: flex;
      margin-top: 10px;
      gap: 10px;
    }

    .thumbnail {
      width: 80px;
      height: 80px;
      cursor: pointer;
      border: 1px solid #ddd;
      object-fit: cover;
    }

    .thumbnail:hover {
      border-color: #007bff;
    }

    .image-zoom {
      width: 200px;
      height: 200px;
      position: absolute;
      top: 0;
      right: 0;
      border: 1px solid #ccc;
      background-repeat: no-repeat;
      display: none;
    }

    /* Product Info */
    .product-info {
      width: 50%;
    }

    .product-info h1 {
      margin-bottom: 10px;
    }

    .sku {
      font-size: 0.9em;
      color: #777;
      margin-bottom: 10px;
    }

    .rating {
      margin-bottom: 10px;
    }

    .stars {
      color: #ffc107;
    }

    .price {
      margin-bottom: 10px;
    }

    .original-price {
      text-decoration: line-through;
      color: #777;
      margin-right: 5px;
    }

    .discount {
      color: #dc3545;
      font-weight: bold;
    }

    .current-price {
      font-size: 1.5em;
      font-weight: bold;
    }

    .description {
      margin-bottom: 20px;
    }

    /* Quantity Selector */
    .quantity-selector {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .quantity-btn {
      background-color: #f4f4f4;
      border: 1px solid #ddd;
      padding: 5px 10px;
      cursor: pointer;
    }

    #quantity {
      width: 50px;
      padding: 5px;
      text-align: center;
      border: 1px solid #ddd;
    }

    /* Add to Cart Button */
    .add-to-cart {
      background-color: #28a745;
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    .add-to-cart:hover {
      background-color: #218838;
    }

    /* Social Sharing */
    .social-sharing {
      margin-top: 20px;
    }

    /* Product Tabs */
    .product-tabs {
      margin-bottom: 30px;
    }

    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
    }

    .tab-btn {
      padding: 10px 20px;
      border: none;
      background-color: white;
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }

    .tab-btn.active {
      border-bottom-color: #007bff;
    }

    .tab-content {
      padding: 20px;
      display: none;
    }

    .tab-content:target {
      display: block;
    }

    #description {
      display: block;
    }

    /* Related Products */
    .related-products {
      text-align: center;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        width: 95%;
        padding: 10px;
      }

      .product-details {
        flex-direction: column;
      }

      .product-images,
      .product-info {
        width: 100%;
      }

      .thumbnails {
        flex-wrap: wrap;
      }

      .thumbnail {
        width: 70px;
        height: 70px;
      }

      .image-zoom {
        display: none !important; /* Disable zoom on small screens */
      }
    }
    /* Related Products */
    .related-products {
      text-align: center;
      margin-top: 40px;
    }

    .related-products-list {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .related-product {
      width: 200px;
      text-align: left;
    }

    .related-product a {
      text-decoration: none;
      color: inherit;
    }

    .related-product img {
      width: 100%;
      height: auto;
      margin-bottom: 10px;
      border-radius: 5px;
    }

    .related-product p {
      font-size: 1em;
    }

    @media (max-width: 768px) {
      .related-products-list {
        flex-direction: column;
        align-items: center;
      }

      .related-product {
        width: 80%;
        text-align: center;
      }
    }
  </style>
  <body>
    <div class="container">
      <nav class="breadcrumb">
        <a href="/">Home</a> &gt; <a href="/shop">Shop</a> &gt;
        <a href="/shop/<%= product.category.name %>"
          ><%= product.category.name %></a
        >
        &gt;
        <span><%= product.productName %></span>
      </nav>

      <div class="product-details">
        <div class="product-images">
          <div class="main-image">
            <img
              src="<%= product.images[0] %>"
              alt="<%= product.productName %>"
              id="mainImage"
            />
            <% if (product.isNew) { %>
            <span class="badge new">New</span>
            <% } %> <% if (product.isOnSale) { %>
            <span class="badge sale">Sale</span>
            <% } %>
          </div>
          <div class="thumbnails">
            <% product.images.forEach(function(image, index) { %>
            <img
              src="<%= image %>"
              alt="<%= product.productName %> Thumbnail"
              data-index="<%= index %>"
              class="thumbnail"
            />
            <% }); %>
          </div>
          <div class="image-zoom"></div>
        </div>

        <div class="product-info">
          <h1><%= product.productName %></h1>
          <p class="sku">SKU: <%= product.sku %></p>
          <div class="rating">
            <span class="stars"><%= product.rating %></span>
            <a href="#reviews">(<%= product.reviewCount %> Reviews)</a>
          </div>
          <div class="price">
            <% if (product.isOnSale) { %>
            <span class="original-price"><%= product.originalPrice %></span>
            <span class="discount"><%= product.discountPercentage %>% off</span>
            <% } %>
            <span class="current-price"><%= product.currentPrice %></span>
          </div>
          <p class="description"><%= product.shortDescription %></p>

          <div class="quantity-selector">
            <button class="quantity-btn minus">-</button>
            <input type="number" id="quantity" value="1" min="1" />
            <button class="quantity-btn plus">+</button>
          </div>
          <button class="add-to-cart">Add to Cart</button>

          <div class="social-sharing">
            <!-- Social sharing buttons here -->
          </div>
        </div>
      </div>

      <div class="product-tabs">
        <div class="tabs">
          <button class="tab-btn active" data-tab="description">
            Description
          </button>
          <button class="tab-btn" data-tab="details">Product Details</button>
          <button class="tab-btn" data-tab="reviews">Reviews</button>
        </div>

        <div class="tab-content" id="description">
          <p><%= product.fullDescription %></p>
        </div>
        <div class="tab-content" id="details">
          <ul>
            <li>Weight: <%= product.details.weight %></li>
            <li>Dimensions: <%= product.details.dimensions %></li>
            <li>Materials: <%= product.details.materials %></li>
            <!-- More details here -->
          </ul>
        </div>
        <div class="tab-content" id="reviews">
          <div class="reviews-list">
            <!-- Customer reviews here -->
          </div>
          <form class="review-form">
            <!-- Review submission form here -->
          </form>
        </div>
      </div>

      <div class="related-products">
        <h2>Related Products</h2>
        <div class="related-products-list">
          <% relatedProducts.forEach(function(relatedProduct) { %>
          <div class="related-product">
            <a href="/product?id=<%= relatedProduct._id %>">
              <img
                src="<%= relatedProduct.images[0] %>"
                alt="<%= relatedProduct.productName %>"
              />
              <p><%= relatedProduct.productName %></p>
            </a>
          </div>
          <% }); %>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Image Switching
        const thumbnails = document.querySelectorAll(".thumbnail");
        const mainImage = document.getElementById("mainImage");

        thumbnails.forEach((thumbnail) => {
          thumbnail.addEventListener("click", function () {
            mainImage.src = this.src;
          });
        });

        // Image Zoom
        const mainImageContainer = document.querySelector(".main-image");
        const imageZoom = document.querySelector(".image-zoom");

        mainImageContainer.addEventListener("mousemove", function (e) {
          imageZoom.style.display = "block";
          const x = e.offsetX;
          const y = e.offsetY;

          imageZoom.style.backgroundImage = `url(${mainImage.src})`;
          imageZoom.style.backgroundSize = `${mainImage.width * 1.5}px ${
            mainImage.height * 1.5
          }px`;
          imageZoom.style.backgroundPosition = `-${x * 0.5}px -${y * 0.5}px`;
          imageZoom.style.left = `${x}px`;
          imageZoom.style.top = `${y}px`;
        });

        mainImageContainer.addEventListener("mouseleave", function () {
          imageZoom.style.display = "none";
        });

        // Quantity Selector
        const quantityInput = document.getElementById("quantity");
        const plusBtn = document.querySelector(".quantity-btn.plus");
        const minusBtn = document.querySelector(".quantity-btn.minus");

        plusBtn.addEventListener("click", function () {
          quantityInput.value = parseInt(quantityInput.value) + 1;
        });

        minusBtn.addEventListener("click", function () {
          if (quantityInput.value > 1) {
            quantityInput.value = parseInt(quantityInput.value) - 1;
          }
        });

        // Tab System
        const tabButtons = document.querySelectorAll(".tab-btn");
        const tabContents = document.querySelectorAll(".tab-content");

        tabButtons.forEach((button) => {
          button.addEventListener("click", function () {
            const tabId = this.dataset.tab;

            // Deactivate all buttons and hide all content
            tabButtons.forEach((btn) => btn.classList.remove("active"));
            tabContents.forEach((content) => (content.style.display = "none"));

            // Activate the clicked button and show the corresponding content
            this.classList.add("active");
            document.getElementById(tabId).style.display = "block";
          });
        });
      });
    </script>
  </body>
</html>
